var starterConfig={animationEffect:"transition.slideUpIn",countdownDate:"2016/05/30",isMailchimp:!1,backgroundSlideshow:{slides:[{src:"img/bg/bg1.jpg"},{src:"img/bg/bg3.jpg"},{src:"img/bg/bg4.jpg"},{src:"img/bg/bg5.jpg"},{src:"img/bg/bg6.jpg"},{src:"img/bg/bg8.jpg"},{src:"img/bg/bg9.jpg"},{src:"img/bg/bg10.jpg"}],overlay:!0,timer:!0,animation:"random",delay:6e3}};$(function(){var e=$(window),s=(e.scrollTop(),$("#about").position().top,$(".bg-pic"),$("#home"),$("#about")),a=(s.offset().top,$("input, textarea")),o=$("body"),t=$("#newsletter-form"),n=$("#newsletter-form #id_email"),r=$("#newsletter-form .status-msg"),i=$(".subscribe-button"),l=i.find(".text"),d=$("html, body"),c=$("a.nav-link"),v=$(".main-header"),m=window.innerHeight;$(".page-loader").remove(),o.hasClass("slider")&&$("body").vegas(starterConfig.backgroundSlideshow),e.scroll(function(){var s=e.scrollTop();s>=100?($("body").addClass("scrolled"),$("body").removeClass("not-scrolled")):($("body").removeClass("scrolled"),$("body").addClass("not-scrolled")),s>m-1?v.addClass("bg"):v.removeClass("bg"),160>=s&&(c.removeClass("active"),$('a.nav-link[href="#"]').addClass("active"))});var u=window.location.hash;""!=u&&(c.removeClass("active"),$('a.nav-link[href="'+u+'"]').addClass("active"),"#"!=u?d.stop().animate({scrollTop:$(u).offset().top},500):d.stop().animate({scrollTop:d.offset().top},500)),$(window).on("hashchange",function(){var e=window.location.hash;c.removeClass("active"),$('a.nav-link[href="'+e+'"]').addClass("active")}),a.on({focus:function(){var e=$(this).attr("id");$('label.input-label[for="'+e+'"]').addClass("shown")},blur:function(){var e=$(this).attr("id");$('label.input-label[for="'+e+'"]').removeClass("shown")}}),$(".scroll-down").on("click",function(e){e.preventDefault(),o.addClass("scrolled"),o.removeClass("not-scrolled")}),c.on("click",function(e){e.preventDefault(),c.removeClass("active"),$(this).addClass("active");var s=$(this).attr("href");"#"!=s?d.stop().animate({scrollTop:$(s).offset().top},500):d.stop().animate({scrollTop:d.offset().top},500),window.history.pushState("","",s)});var f=$(".responsive-nav"),g=$(".responsive-nav li, .responsive-nav .social-links"),p=$(".responsive-nav a"),h=$(".hamburger-menu");h.on("click",function(){$(this).hasClass("open")?($(this).removeClass("open"),f.removeClass("open")):($(this).addClass("open"),f.addClass("open"),g.velocity("transition.slideRightIn",{stagger:200,drag:!0}))}),p.on("click",function(){h.removeClass("open"),f.removeClass("open")}),$("#home .animated").velocity(starterConfig.animationEffect,{stagger:200,drag:!0}),$(".countdown").countdown(starterConfig.countdownDate,function(e){$(this).html(e.strftime('<div class="days-hours clearfix">                                         <div class="date">                                             <div class="date-date">%D</div>                                             <div class="date-text">days</div>                                         </div>                                         <div class="date">                                             <div class="date-date">%H</div>                                             <div class="date-text">hours</div>                                         </div>                                     </div>                                     <div class="minutes-seconds clearfix">                                         <div class="date">                                             <div class="date-date">%M</div>                                             <div class="date-text">minutes</div>                                         </div>                                         <div class="date">                                             <div class="date-date">%S</div>                                             <div class="date-text">seconds</div>                                         </div>                                     </div>'))}),$("#newsletter-form").validate({submitHandler:function(e){r.removeClass("error success").text(""),i.addClass("loading"),l.text("Sending"),email=n.val(),starterConfig.isMailchimp?$.ajax({url:"newsletter.php",type:"post",data:{email:email},dataType:"json",success:function(e){400==e.status?(r.addClass("shown error"),r.text("Sorry! There was error registering your address.")):e.id&&(r.addClass("shown success"),r.text("Thank you for subscribing! Please check your email to activate."))},error:function(e){console.log(e)},complete:function(){t.find("label.error").remove(),i.removeClass("loading"),l.text("Subscribe")}}):$.ajax({url:"newsletter-by-email.php",type:"post",data:{email:email},success:function(e){"sent"==e?(r.addClass("shown success"),r.text("Thank you for subscribing!")):(r.addClass("shown error"),r.text("Sorry! There was error registering your address."))},error:function(e){r.addClass("shown error"),r.text("Sorry! There was error registering your address.")},complete:function(){t.find("label.error").remove(),i.removeClass("loading"),l.text("Subscribe")}})},invalidHandler:function(){alert("Error")}}),n.on("keydown",function(){r.removeClass("shown error success").text("")});$(".section").waypoint({handler:function(e){var s=$(this.element),a=s.find(".animated");0==a.first().css("opacity")&&a.velocity(starterConfig.animationEffect,{stagger:200,drag:!0})},offset:"30%"}),$(".section").waypoint({handler:function(e){var s=$(this.element),a=s.attr("id");"up"==e&&a&&(c.removeClass("active"),$('a.nav-link[href="#'+a+'"]').addClass("active"))},offset:-30}),$(".section").waypoint({handler:function(e){var s=$(this.element),a=s.attr("id");"down"==e&&a&&(c.removeClass("active"),$('a.nav-link[href="#'+a+'"]').addClass("active"))},offset:30});initPhotoSwipeFromDOM(".works-row");var C=$("#contact-form .status-msg");$("#contact-form").validate({submitHandler:function(e){var s=$(e).find("#id_name"),a=$(e).find("#id_email"),o=$(e).find("#id_subject"),t=$(e).find("#id_message"),n=$("#contact-form .send-button"),r={name:s.val(),email:a.val(),subject:o.val(),message:t.val()};n.addClass("loading"),C.removeClass("error").text(""),$.ajax({url:"contact.php",type:"post",data:r,success:function(e){C.addClass("shown success").text("Thank you! Your message is sent."),setTimeout(function(){C.removeClass("shown success").text("")},3e3)},error:function(e){C.addClass("shown error").text("Sorry! There was error sending your message. Please try again.")},complete:function(){s.val(""),a.val(""),o.val(""),t.val(""),n.removeClass("loading")}})}});var b=$("#mapModal");$(".open-map").on("click",function(){b.addClass("open")}),b.on("hide.bs.modal",function(e){b.removeClass("open")});var w=$(".st-color-chooser");$(".chooser-toggler").on("click",function(){w.toggleClass("open")});var y=$(".colors .color-button"),x="";y.on("click",function(){x=$(this).attr("data-color"),o.removeClass(function(e,s){return(s.match(/\bcolor-\S+/g)||[]).join(" ")}),o.addClass("color-"+x),w.removeClass("open")}),$("#home").on("click",function(){w.hasClass("open")&&w.removeClass("open")})});